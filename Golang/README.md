# Golang ç¬”è®°

## åœ¨æœ¬åœ°å¯åŠ¨æ–‡æ¡£

é€šè¿‡è¿è¡Œ `godoc -http :8000`ï¼Œå¯ä»¥åœ¨æœ¬åœ°å¯åŠ¨æ–‡æ¡£ã€‚

> è®¿é—® [localhost:8000/pkg](localhost:8000/pkg)ï¼Œå°†çœ‹åˆ°ç³»ç»Ÿä¸Šå®‰è£…çš„æ‰€æœ‰åŒ…ã€‚  
> 
> æµè§ˆ http://localhost:8000/pkg/testing/ å°†ä¼šçœ‹åˆ°ä¸€äº›æœ‰ç”¨çš„å†…å®¹ã€‚

## CLI

```bash
go build -v  # ç¼–è¯‘ä»£ç 
go clean  # æ¸…é™¤ç¼–è¯‘æ–‡ä»¶
go fmt  # æ ¼å¼åŒ–ä»£ç 
go get  # åŠ¨æ€è·å–è¿œç¨‹ä»£ç åŒ…
go install  # å®‰è£…æŸä¸ªåŒ…
go test  # è¯»å– *_test.go ï¼Œç”Ÿæˆå¹¶è¿è¡Œæµ‹è¯•ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶
```

## å…³é”®å­—é€Ÿè§ˆ

```go
break    default      func    interface    select
case     defer        go      map          struct
chan     else         goto    package      switch
const    fallthrough  if      range        type
continue for          import  return       var
```

## å†…ç½®åŸºç¡€ç±»å‹

å¸ƒå°”å€¼çš„ç±»å‹ä¸º`bool`ï¼Œå€¼æ˜¯`true`æˆ–`false`ï¼Œé»˜è®¤ä¸º`false`ã€‚

æ•´æ•°ç±»å‹æœ‰æ— ç¬¦å·å’Œå¸¦ç¬¦å·ä¸¤ç§ã€‚GoåŒæ—¶æ”¯æŒ`int`å’Œ`uint`ï¼Œè¿™ä¸¤ç§ç±»å‹çš„é•¿åº¦ç›¸åŒï¼Œä½†å…·ä½“é•¿åº¦å–å†³äºä¸åŒç¼–è¯‘å™¨çš„å®ç°ã€‚Goé‡Œé¢ä¹Ÿæœ‰ç›´æ¥å®šä¹‰å¥½ä½æ•°çš„ç±»å‹ï¼š`rune`, `int8`, `int16`, `int32`, `int64`å’Œ`byte`, `uint8`, `uint16`, `uint32`, `uint64`ã€‚å…¶ä¸­`rune`æ˜¯`int32`çš„åˆ«ç§°ï¼Œ`byte`æ˜¯`uint8`çš„åˆ«ç§°ã€‚

æµ®ç‚¹æ•°çš„ç±»å‹æœ‰ `float32` å’Œ `float64` ä¸¤ç§ï¼ˆæ²¡æœ‰`float`ç±»å‹ï¼‰ï¼Œé»˜è®¤æ˜¯ `float64` ã€‚

å¤æ•°ç±»å‹ã€‚å®ƒçš„é»˜è®¤ç±»å‹æ˜¯ `complex128`ï¼ˆ64ä½å®æ•°+64ä½è™šæ•°ï¼‰ã€‚å¦‚æœéœ€è¦å°ä¸€äº›çš„ï¼Œä¹Ÿæœ‰ `complex64` (32ä½å®æ•°+32ä½è™šæ•°)ã€‚å¤æ•°çš„å½¢å¼ä¸º `RE + IMi` ï¼Œå…¶ä¸­ `RE` æ˜¯å®æ•°éƒ¨åˆ†ï¼Œ `IM `æ˜¯è™šæ•°éƒ¨åˆ†ï¼Œè€Œæœ€åçš„ `i` æ˜¯è™šæ•°å•ä½ã€‚

å­—ç¬¦ä¸²ç±»å‹ `string` ï¼Œé‡‡ç”¨ `UTF-8` å­—ç¬¦é›†ç¼–ç ã€‚å­—ç¬¦ä¸²æ˜¯ç”¨ä¸€å¯¹åŒå¼•å·ï¼ˆ`""`ï¼‰æˆ–åå¼•å·ï¼ˆ``` ```ï¼‰æ‹¬èµ·æ¥å®šä¹‰ï¼Œå®ƒçš„ç±»å‹æ˜¯ `string` ã€‚å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œä½†å¯è¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼š

```go
s := "hello"
s = "c" + s[1:] // å­—ç¬¦ä¸²è™½ä¸èƒ½æ›´æ”¹ï¼Œä½†å¯è¿›è¡Œåˆ‡ç‰‡æ“ä½œ
fmt.Printf("%s\n", s)
```

é”™è¯¯ç±»å‹ `error` ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†é”™è¯¯ä¿¡æ¯ã€‚Goçš„`package`é‡Œé¢è¿˜ä¸“é—¨æœ‰ä¸€ä¸ªåŒ…`errors`æ¥å¤„ç†é”™è¯¯ã€‚

## å˜é‡å£°æ˜

```go
const constantName = value  // å®šä¹‰å¸¸é‡
const Pi float32 = 3.1415926  // //å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥æ˜ç¡®æŒ‡å®šå¸¸é‡çš„ç±»å‹ï¼š
```

å¸¸é‡å¯ä»¥æŒ‡å®šç›¸å½“å¤šçš„å°æ•°ä½æ•°ï¼Œ è‹¥æŒ‡å®šç»™float32è‡ªåŠ¨ç¼©çŸ­ä¸º32bitï¼ŒæŒ‡å®šç»™float64è‡ªåŠ¨ç¼©çŸ­ä¸º64bitã€‚

```go
var variableName type  // å®šä¹‰ä¸€ä¸ªåç§°ä¸ºâ€œvariableNameâ€ï¼Œç±»å‹ä¸º"type"çš„å˜é‡
var vname1, vname2, vname3 type  // å®šä¹‰ä¸‰ä¸ªç±»å‹éƒ½æ˜¯â€œtypeâ€çš„å˜é‡
var variableName type = value  // åˆå§‹åŒ–â€œvariableNameâ€çš„å˜é‡ä¸ºâ€œvalueâ€å€¼ï¼Œç±»å‹æ˜¯â€œtypeâ€
var vname1, vname2, vname3 type= v1, v2, v3  // å®šä¹‰ä¸‰ä¸ªç±»å‹éƒ½æ˜¯"type"çš„å˜é‡,å¹¶åˆ†åˆ«åˆå§‹åŒ–
```

ç®€çŸ­å£°æ˜è¯­æ³•ä¸º `varName := value` ï¼Œåªèƒ½ç”¨åœ¨å‡½æ•°å†…éƒ¨ã€‚

> Variables declared without a corresponding initialization are *zero-valued*. For example, the zero value for an `int` is `0`.

è‹¥å˜é‡åœ¨å£°æ˜æ—¶æ²¡æœ‰èµ‹åˆå€¼ï¼Œå®ƒçš„åˆå€¼å°†ä¸º é›¶å€¼ï¼ˆzero-valueï¼‰ï¼Œæ¯”å¦‚ï¼š

```go
var a int
fmt.Println(a)  // 0
```

`_`ï¼ˆä¸‹åˆ’çº¿ï¼‰æ˜¯ä¸ªç‰¹æ®Šçš„å˜é‡åï¼Œä»»ä½•èµ‹äºˆå®ƒçš„å€¼éƒ½ä¼šè¢«ä¸¢å¼ƒã€‚

å·²å£°æ˜ä½†æœªä½¿ç”¨çš„å˜é‡ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ã€‚

## iotaæšä¸¾

Goé‡Œé¢æœ‰ä¸€ä¸ªå…³é”®å­—`iota`ï¼Œè¿™ä¸ªå…³é”®å­—ç”¨æ¥å£°æ˜`enum`çš„æ—¶å€™é‡‡ç”¨ï¼Œå®ƒé»˜è®¤å¼€å§‹å€¼æ˜¯0ï¼Œconstä¸­æ¯å¢åŠ ä¸€è¡ŒåŠ 1ï¼š

```go
package main

import (
	"fmt"
)

const (
	x = iota // x == 0
	y = iota // y == 1
	z = iota // z == 2
	w        // å¸¸é‡å£°æ˜çœç•¥å€¼æ—¶ï¼Œé»˜è®¤å’Œä¹‹å‰ä¸€ä¸ªå€¼çš„å­—é¢ç›¸åŒã€‚è¿™é‡Œéšå¼åœ°è¯´w = iotaï¼Œå› æ­¤w == 3ã€‚å…¶å®ä¸Šé¢yå’Œzå¯åŒæ ·ä¸ç”¨"= iota"
)

const v = iota // æ¯é‡åˆ°ä¸€ä¸ªconstå…³é”®å­—ï¼Œiotaå°±ä¼šé‡ç½®ï¼Œæ­¤æ—¶v == 0

const (
	h, i, j = iota, iota, iota //h=0,i=0,j=0 iotaåœ¨åŒä¸€è¡Œå€¼ç›¸åŒ
)

const (
	a       = iota //a=0
	b       = "B"
	c       = iota             //c=2
	d, e, f = iota, iota, iota //d=3,e=3,f=3
	g       = iota             //g = 4
)

func main() {
	fmt.Println(a, b, c, d, e, f, g, h, i, j, x, y, z, w, v)
}
```

## array

å†™åœ¨å‰é¢ï¼šGo è¯­è¨€ä¸­æ•°ç»„ã€å­—ç¬¦ä¸²å’Œåˆ‡ç‰‡ä¸‰è€…æ˜¯å¯†åˆ‡ç›¸å…³çš„æ•°æ®ç»“æ„ã€‚è¿™ä¸‰ç§æ•°æ®ç±»å‹ï¼Œåœ¨åº•å±‚åŸå§‹æ•°æ®æœ‰ç€ç›¸åŒçš„å†…å­˜ç»“æ„ï¼Œåœ¨ä¸Šå±‚ï¼Œå› ä¸ºè¯­æ³•çš„é™åˆ¶è€Œæœ‰ç€ä¸åŒçš„è¡Œä¸ºè¡¨ç°ã€‚

`array`å°±æ˜¯æ•°ç»„ï¼Œå®ƒçš„å®šä¹‰æ–¹å¼å¦‚ä¸‹ï¼š

```go
var arr [n]type
```

æ•°ç»„å¯ä»¥ä½¿ç”¨å¦ä¸€ç§`:=`æ¥å£°æ˜

```go
a := [3]int{1, 2, 3} // å£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º3çš„intæ•°ç»„
b := [10]int{1, 2, 3} // å£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º10çš„intæ•°ç»„ï¼Œå…¶ä¸­å‰ä¸‰ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸º1ã€2ã€3ï¼Œå…¶å®ƒé»˜è®¤ä¸º0
c := [...]int{4, 5, 6} // è‡ªåŠ¨æ ¹æ®å…ƒç´ ä¸ªæ•°æ¥è®¡ç®—é•¿åº¦
```

ç”±äºé•¿åº¦ä¹Ÿæ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤`[3]int`ä¸`[4]int`æ˜¯ä¸åŒçš„ç±»å‹ã€‚

å½“æŠŠä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°çš„æ—¶å€™ï¼Œä¼ å…¥çš„å…¶å®æ˜¯è¯¥æ•°ç»„çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯å®ƒçš„æŒ‡é’ˆã€‚

### æ•°ç»„æŒ‡é’ˆ

```go
var a = [...]int{1, 2, 3} // a æ˜¯ä¸€ä¸ªæ•°ç»„
var b = &a                // b æ˜¯æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ

fmt.Println(a[0], a[1])   // æ‰“å°æ•°ç»„çš„å‰2ä¸ªå…ƒç´ 
fmt.Println(b[0], b[1])   // é€šè¿‡æ•°ç»„æŒ‡é’ˆè®¿é—®æ•°ç»„å…ƒç´ çš„æ–¹å¼å’Œæ•°ç»„ç±»ä¼¼
```

### å¤šç»´æ•°ç»„

```go
// å£°æ˜äº†ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œè¯¥æ•°ç»„ä»¥ä¸¤ä¸ªæ•°ç»„ä½œä¸ºå…ƒç´ ï¼Œå…¶ä¸­æ¯ä¸ªæ•°ç»„ä¸­åˆæœ‰4ä¸ªintç±»å‹çš„å…ƒç´ 
doubleArray := [2][4]int{[4]int{1, 2, 3, 4}, [4]int{5, 6, 7, 8}}

// ä¸Šé¢çš„å£°æ˜å¯ä»¥ç®€åŒ–ï¼Œç›´æ¥å¿½ç•¥å†…éƒ¨çš„ç±»å‹
easyArray := [2][4]int{{1, 2, 3, 4}, {5, 6, 7, 8}}
```

## slice

`slice`å¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„åŠ¨æ€æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ã€‚

`slice`æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªåº•å±‚`array`ï¼Œ`slice`çš„å£°æ˜ä¹Ÿå¯ä»¥åƒ`array`ä¸€æ ·ï¼Œåªæ˜¯ä¸éœ€è¦é•¿åº¦ã€‚

> `slice`å’Œæ•°ç»„åœ¨å£°æ˜æ—¶çš„åŒºåˆ«ï¼šå£°æ˜æ•°ç»„æ—¶ï¼Œæ–¹æ‹¬å·å†…å†™æ˜äº†æ•°ç»„çš„é•¿åº¦æˆ–ä½¿ç”¨`...`è‡ªåŠ¨è®¡ç®—é•¿åº¦ï¼Œè€Œå£°æ˜`slice`æ—¶ï¼Œæ–¹æ‹¬å·å†…æ²¡æœ‰ä»»ä½•å­—ç¬¦ã€‚

```go
var fslice []int  // å’Œå£°æ˜arrayä¸€æ ·ï¼Œåªæ˜¯å°‘äº†é•¿åº¦
slice := []byte {'a', 'b', 'c', 'd'}  // å£°æ˜ä¸€ä¸ªsliceï¼Œå¹¶åˆå§‹åŒ–æ•°æ®
```

`slice`å¯ä»¥ä»ä¸€ä¸ªæ•°ç»„æˆ–ä¸€ä¸ªå·²ç»å­˜åœ¨çš„`slice`ä¸­å†æ¬¡å£°æ˜ã€‚`slice`é€šè¿‡`array[i:j]`æ¥è·å–ï¼Œå…¶ä¸­`i`æ˜¯æ•°ç»„çš„å¼€å§‹ä½ç½®ï¼Œ`j`æ˜¯ç»“æŸä½ç½®ï¼Œä½†ä¸åŒ…å«`array[j]`ï¼Œå®ƒçš„é•¿åº¦æ˜¯`j-i`ã€‚

sliceæœ‰ä¸€äº›ç®€ä¾¿çš„æ“ä½œï¼š

- `slice`çš„é»˜è®¤å¼€å§‹ä½ç½®æ˜¯0ï¼Œ`ar[:n]`ç­‰ä»·äº`ar[0:n]`
- `slice`çš„ç¬¬äºŒä¸ªåºåˆ—é»˜è®¤æ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œ`ar[n:]`ç­‰ä»·äº`ar[n:len(ar)]`
- å¦‚æœä»ä¸€ä¸ªæ•°ç»„é‡Œé¢ç›´æ¥è·å–`slice`ï¼Œå¯ä»¥è¿™æ ·`ar[:]`ï¼Œå› ä¸ºé»˜è®¤ç¬¬ä¸€ä¸ªåºåˆ—æ˜¯0ï¼Œç¬¬äºŒä¸ªæ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œå³ç­‰ä»·äº`ar[0:len(ar)]`

`slice`æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥å½“å¼•ç”¨æ”¹å˜å…¶ä¸­å…ƒç´ çš„å€¼æ—¶ï¼Œå…¶å®ƒçš„æ‰€æœ‰å¼•ç”¨éƒ½ä¼šæ”¹å˜è¯¥å€¼ã€‚

ä»æ¦‚å¿µä¸Šé¢æ¥è¯´`slice`åƒä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“åŒ…å«äº†ä¸‰ä¸ªå…ƒç´ ï¼š

- ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ•°ç»„ä¸­`slice`æŒ‡å®šçš„å¼€å§‹ä½ç½®
- é•¿åº¦ï¼Œå³`slice`çš„é•¿åº¦
- æœ€å¤§é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯`slice`å¼€å§‹ä½ç½®åˆ°æ•°ç»„çš„æœ€åä½ç½®çš„é•¿åº¦

```go
Array_a := [10]byte{'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'}
Slice_a := Array_a[2:5]
```

ä¸Šé¢ä»£ç çš„çœŸæ­£å­˜å‚¨ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º

[![img](https://github.com/astaxie/build-web-application-with-golang/raw/master/zh/images/2.2.slice2.png?raw=true)](https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/images/2.2.slice2.png?raw=true)

`slice`æœ‰å‡ ä¸ªæœ‰ç”¨çš„å†…ç½®å‡½æ•°ï¼š

- `len` è·å–`slice`çš„é•¿åº¦
- `cap` è·å–`slice`çš„æœ€å¤§å®¹é‡
- `append` å‘`slice`é‡Œé¢è¿½åŠ ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ ï¼Œç„¶åè¿”å›ä¸€ä¸ªå’Œ`slice`ä¸€æ ·ç±»å‹çš„`slice`
- `copy` å‡½æ•°`copy`ä»æº`slice`çš„`src`ä¸­å¤åˆ¶å…ƒç´ åˆ°ç›®æ ‡`dst`ï¼Œå¹¶ä¸”è¿”å›å¤åˆ¶çš„å…ƒç´ çš„ä¸ªæ•°

> æ³¨ï¼š`append`å‡½æ•°ä¼šæ”¹å˜`slice`æ‰€å¼•ç”¨çš„æ•°ç»„çš„å†…å®¹ï¼Œä»è€Œå½±å“åˆ°å¼•ç”¨åŒä¸€æ•°ç»„çš„å…¶å®ƒ`slice`ã€‚ ä½†å½“`slice`ä¸­æ²¡æœ‰å‰©ä½™ç©ºé—´ï¼ˆå³`(cap-len) == 0`ï¼‰æ—¶ï¼Œæ­¤æ—¶å°†åŠ¨æ€åˆ†é…æ–°çš„æ•°ç»„ç©ºé—´ã€‚è¿”å›çš„`slice`æ•°ç»„æŒ‡é’ˆå°†æŒ‡å‘è¿™ä¸ªç©ºé—´ï¼Œè€ŒåŸæ•°ç»„çš„å†…å®¹å°†ä¿æŒä¸å˜ï¼›å…¶å®ƒå¼•ç”¨æ­¤æ•°ç»„çš„`slice`åˆ™ä¸å—å½±å“ã€‚

ä» Go1.2 å¼€å§‹ slice æ”¯æŒç¬¬ä¸‰ä¸ªå‚æ•°ç”¨ä»¥æŒ‡å®šå…¶å®¹é‡ã€‚

ä¹‹å‰æˆ‘ä»¬ä¸€ç›´é‡‡ç”¨è¿™ç§æ–¹å¼åœ¨ slice æˆ–è€… array åŸºç¡€ä¸Šæ¥è·å–ä¸€ä¸ª sliceï¼š

```
var array [10]int
slice := array[2:4]
```

è¿™ä¸ªä¾‹å­é‡Œé¢ slice çš„å®¹é‡æ˜¯ 8ï¼Œæ–°ç‰ˆæœ¬é‡Œé¢å¯ä»¥æŒ‡å®šè¿™ä¸ªå®¹é‡ï¼š

```
slice = array[2:4:7]
```

ä¸Šé¢è¿™ä¸ªçš„å®¹é‡å°±æ˜¯`7-2`ï¼Œå³ 5ã€‚è¿™æ ·è¿™ä¸ªäº§ç”Ÿçš„æ–°çš„ slice å°±æ²¡åŠæ³•è®¿é—®æœ€åçš„ä¸‰ä¸ªå…ƒç´ ã€‚

å¦‚æœ slice æ˜¯è¿™æ ·çš„å½¢å¼`array[:i:j]`ï¼Œå³ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç©ºï¼Œé»˜è®¤å€¼å°±æ˜¯0ã€‚

## map

`map`ä¹Ÿæ˜¯ä¸€ç§å¼•ç”¨ç±»å‹ï¼Œå¦‚æœä¸¤ä¸ª`map`åŒæ—¶æŒ‡å‘ä¸€ä¸ªåº•å±‚ï¼Œé‚£ä¹ˆä¸€ä¸ªæ”¹å˜ï¼Œå¦ä¸€ä¸ªä¹Ÿç›¸åº”çš„æ”¹å˜ï¼š

`map` ä¹Ÿå°±æ˜¯Pythonä¸­å­—å…¸çš„æ¦‚å¿µï¼Œå®ƒçš„æ ¼å¼ä¸º `map[keyType]valueType`

`map` çš„è¯»å–å’Œè®¾ç½®ä¹Ÿç±»ä¼¼ `slice` ä¸€æ ·ï¼Œé€šè¿‡ `key` æ¥æ“ä½œï¼Œåªæ˜¯ `slice` çš„ `index` åªèƒ½æ˜¯ `int` ç±»å‹ï¼Œè€Œ `map` å¤šäº†å¾ˆå¤šç±»å‹ã€‚

```go
// å£°æ˜ä¸€ä¸ªå­—å…¸,å…¶ key æ˜¯ string ç±»å‹ï¼Œå€¼æ˜¯ int ç±»å‹,è¿™ç§æ–¹å¼çš„å£°æ˜éœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰ä½¿ç”¨makeåˆå§‹åŒ–
var numbers map[string]int
// å¦ä¸€ç§mapçš„å£°æ˜æ–¹å¼
numbers = make(map[string]int)
numbers["one"] = 1  //èµ‹å€¼
numbers["ten"] = 10 //èµ‹å€¼
numbers["three"] = 3

fmt.Println("ç¬¬ä¸‰ä¸ªæ•°å­—æ˜¯: ", numbers["three"]) // è¯»å–æ•°æ®
// æ‰“å°å‡ºæ¥å¦‚:ç¬¬ä¸‰ä¸ªæ•°å­—æ˜¯: 3
```

ä½¿ç”¨mapè¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š

- `map`æ˜¯æ— åºçš„ï¼Œæ¯æ¬¡æ‰“å°å‡ºæ¥çš„`map`éƒ½ä¼šä¸ä¸€æ ·ï¼Œå®ƒä¸èƒ½é€šè¿‡`index`è·å–ï¼Œè€Œå¿…é¡»é€šè¿‡`key`è·å–
- `map`çš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œä¹Ÿå°±æ˜¯å’Œ`slice`ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ç§å¼•ç”¨ç±»å‹
- å†…ç½®çš„`len`å‡½æ•°åŒæ ·é€‚ç”¨äº`map`ï¼Œè¿”å›`map`æ‹¥æœ‰çš„`key`çš„æ•°é‡
- `map`çš„å€¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¿®æ”¹ï¼Œé€šè¿‡`numbers["one"]=11`å¯ä»¥å¾ˆå®¹æ˜“çš„æŠŠkeyä¸º`one`çš„å­—å…¸å€¼æ”¹ä¸º`11`
- `map`å’Œå…¶ä»–åŸºæœ¬å‹åˆ«ä¸åŒï¼Œå®ƒä¸æ˜¯thread-safeï¼Œåœ¨å¤šä¸ªgo-routineå­˜å–æ—¶ï¼Œå¿…é¡»ä½¿ç”¨mutex lockæœºåˆ¶

`map`å†…ç½®æœ‰åˆ¤æ–­æ˜¯å¦å­˜åœ¨`key`çš„æ–¹å¼ï¼Œé€šè¿‡`delete`åˆ é™¤`map`çš„å…ƒç´ ï¼š

```go
// åˆå§‹åŒ–ä¸€ä¸ªå­—å…¸
rating := map[string]float32{"C":5, "Go":4.5, "Python":4.5, "C++":2 }
// mapæœ‰ä¸¤ä¸ªè¿”å›å€¼ï¼Œç¬¬äºŒä¸ªè¿”å›å€¼ï¼Œå¦‚æœä¸å­˜åœ¨keyï¼Œé‚£ä¹ˆokä¸ºfalseï¼Œå¦‚æœå­˜åœ¨okä¸ºtrue
csharpRating, ok := rating["C#"]
if ok {
	fmt.Println("C# is in the map and its rating is ", csharpRating)
} else {
	fmt.Println("We have no rating associated with C# in the map")
}

delete(rating, "C")  // åˆ é™¤keyä¸ºCçš„å…ƒç´ 
```

## makeã€newæ“ä½œ

`make`ç”¨äºå†…å»ºç±»å‹ï¼ˆ`map`ã€`slice` å’Œ`channel`ï¼‰çš„å†…å­˜åˆ†é…ã€‚`new`ç”¨äºå„ç§ç±»å‹çš„å†…å­˜åˆ†é…ã€‚

å†…å»ºå‡½æ•°`new`æœ¬è´¨ä¸Šè¯´è·Ÿå…¶å®ƒè¯­è¨€ä¸­çš„åŒåå‡½æ•°åŠŸèƒ½ä¸€æ ·ï¼š`new(T)`åˆ†é…äº†é›¶å€¼å¡«å……çš„`T`ç±»å‹çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”è¿”å›å…¶åœ°å€ï¼Œå³ä¸€ä¸ª`*T`ç±»å‹çš„å€¼ã€‚ç”¨Goçš„æœ¯è¯­è¯´ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ–°åˆ†é…çš„ç±»å‹`T`çš„é›¶å€¼ã€‚æœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼š

> `new`è¿”å›æŒ‡é’ˆã€‚

å†…å»ºå‡½æ•°`make(T, args)`ä¸`new(T)`æœ‰ç€ä¸åŒçš„åŠŸèƒ½ï¼Œmakeåªèƒ½åˆ›å»º`slice`ã€`map`å’Œ`channel`ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæœ‰åˆå§‹å€¼(éé›¶)çš„`T`ç±»å‹ï¼Œè€Œä¸æ˜¯`*T`ã€‚æœ¬è´¨æ¥è®²ï¼Œå¯¼è‡´è¿™ä¸‰ä¸ªç±»å‹æœ‰æ‰€ä¸åŒçš„åŸå› æ˜¯æŒ‡å‘æ•°æ®ç»“æ„çš„å¼•ç”¨åœ¨ä½¿ç”¨å‰å¿…é¡»è¢«åˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª`slice`ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«æŒ‡å‘æ•°æ®ï¼ˆå†…éƒ¨`array`ï¼‰çš„æŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡çš„ä¸‰é¡¹æè¿°ç¬¦ï¼›åœ¨è¿™äº›é¡¹ç›®è¢«åˆå§‹åŒ–ä¹‹å‰ï¼Œ`slice`ä¸º`nil`ã€‚å¯¹äº`slice`ã€`map`å’Œ`channel`æ¥è¯´ï¼Œ`make`åˆå§‹åŒ–äº†å†…éƒ¨çš„æ•°æ®ç»“æ„ï¼Œå¡«å……é€‚å½“çš„å€¼ã€‚

> `make`è¿”å›åˆå§‹åŒ–åçš„ï¼ˆéé›¶ï¼‰å€¼ã€‚

![img](https://github.com/astaxie/build-web-application-with-golang/raw/master/zh/images/2.2.makenew.png?raw=true)

## é›¶å€¼

å…³äºâ€œé›¶å€¼â€ï¼Œæ‰€æŒ‡å¹¶éæ˜¯ç©ºå€¼ï¼Œè€Œæ˜¯ä¸€ç§â€œå˜é‡æœªå¡«å……å‰â€çš„é»˜è®¤å€¼ï¼Œé€šå¸¸ä¸º0ã€‚ æ­¤å¤„ç½—åˆ— éƒ¨åˆ†ç±»å‹ çš„ â€œé›¶å€¼â€:

```go
int     0
int8    0
int32   0
int64   0
uint    0x0
rune    0 //runeçš„å®é™…ç±»å‹æ˜¯ int32
byte    0x0 // byteçš„å®é™…ç±»å‹æ˜¯ uint8
float32 0 //é•¿åº¦ä¸º 4 byte
float64 0 //é•¿åº¦ä¸º 8 byte
bool    false
string  ""
```

## if

Goé‡Œé¢`if`æ¡ä»¶åˆ¤æ–­è¯­å¥ä¸­ä¸éœ€è¦æ‹¬å·

Goçš„`if`è¿˜æ¡ä»¶åˆ¤æ–­è¯­å¥é‡Œé¢å…è®¸å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„ä½œç”¨åŸŸåªèƒ½åœ¨è¯¥æ¡ä»¶é€»è¾‘å—å†…ã€‚

## goto

ç”¨`goto`è·³è½¬åˆ°å¿…é¡»åœ¨å½“å‰å‡½æ•°å†…å®šä¹‰çš„æ ‡ç­¾ã€‚æ ‡ç­¾åæ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚

## for

```go
for expression1; expression2; expression3 {
	//...
}
```

å…¶ä¸­`expression1`å’Œ`expression3`æ˜¯å˜é‡å£°æ˜æˆ–è€…å‡½æ•°è°ƒç”¨è¿”å›å€¼ä¹‹ç±»çš„ï¼Œ`expression2`æ˜¯ç”¨æ¥æ¡ä»¶åˆ¤æ–­ï¼Œ`expression1`åœ¨å¾ªç¯å¼€å§‹ä¹‹å‰è°ƒç”¨ï¼Œ`expression3`åœ¨æ¯è½®å¾ªç¯ç»“æŸä¹‹æ—¶è°ƒç”¨ã€‚

æœ‰äº›æ—¶å€™éœ€è¦è¿›è¡Œå¤šä¸ªèµ‹å€¼æ“ä½œï¼Œç”±äºGoé‡Œé¢æ²¡æœ‰`,`æ“ä½œç¬¦ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¹³è¡Œèµ‹å€¼`i, j = i+1, j-1`

å¿½ç•¥`expression1`å’Œ`expression3 `å°±æ˜¯`while`çš„åŠŸèƒ½

`break`æ“ä½œæ˜¯è·³å‡ºå½“å‰å¾ªç¯ï¼Œ`continue`æ˜¯è·³è¿‡æœ¬æ¬¡å¾ªç¯ã€‚

`for`é…åˆ`range`å¯ä»¥ç”¨äºè¯»å–`slice`å’Œ`map`çš„æ•°æ®ï¼š

```go
for k,v:=range map {
	fmt.Println("map's key:",k)
	fmt.Println("map's val:",v)
}
```

ç”±äº Go æ”¯æŒ â€œå¤šå€¼è¿”å›â€, è€Œå¯¹äºâ€œå£°æ˜è€Œæœªè¢«è°ƒç”¨â€çš„å˜é‡, ç¼–è¯‘å™¨ä¼šæŠ¥é”™, åœ¨è¿™ç§æƒ…å†µä¸‹, å¯ä»¥ä½¿ç”¨`_`æ¥ä¸¢å¼ƒä¸éœ€è¦çš„è¿”å›å€¼ ä¾‹å¦‚ï¼š

```go
for _, v := range map{
	fmt.Println("map's val:", v)
}
```

## switch

```
switch sExpr {
case expr1:
	some instructions
case expr2:
	some other instructions
case expr3:
	some other instructions
default:
	other code
}
```

`sExpr`å’Œ`expr1`ã€`expr2`ã€`expr3`çš„ç±»å‹å¿…é¡»ä¸€è‡´ã€‚

è¡¨è¾¾å¼ä¸å¿…æ˜¯å¸¸é‡æˆ–æ•´æ•°ï¼Œæ‰§è¡Œçš„è¿‡ç¨‹ä»ä¸Šè‡³ä¸‹ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…é¡¹ï¼›è€Œå¦‚æœ`switch`æ²¡æœ‰è¡¨è¾¾å¼ï¼Œå®ƒä¼šåŒ¹é…`true`ã€‚

Goé‡Œé¢`switch`é»˜è®¤ç›¸å½“äºæ¯ä¸ª`case`æœ€åå¸¦æœ‰`break`ï¼ŒåŒ¹é…æˆåŠŸåä¸ä¼šè‡ªåŠ¨å‘ä¸‹æ‰§è¡Œå…¶ä»–caseï¼Œè€Œæ˜¯è·³å‡ºæ•´ä¸ª`switch`, ä½†æ˜¯å¯ä»¥ä½¿ç”¨`fallthrough`å¼ºåˆ¶æ‰§è¡Œåé¢çš„caseä»£ç ã€‚

## func

```go
func funcName(input1 type1, input2 type2) (output1 type1, output2 type2) {
	//è¿™é‡Œæ˜¯å¤„ç†é€»è¾‘ä»£ç 
	//è¿”å›å¤šä¸ªå€¼
	return value1, value2
}
```

æœ€å¥½å‘½åè¿”å›å€¼ï¼Œå› ä¸ºä¸å‘½åè¿”å›å€¼ï¼Œè™½ä»£ç æ›´ç®€æ´ï¼Œä½†æ˜¯ç”Ÿæˆçš„æ–‡æ¡£å¯è¯»æ€§å·®ã€‚

```go
func SumAndProduct(A, B int) (add int, Multiplied int) {
	add = A+B
	Multiplied = A*B
	return
}
```

### å˜å‚

å‡½æ•°å¯ä»¥æœ‰ä¸å®šæ•°é‡çš„å‚æ•°ã€‚ä¸ºäº†åšåˆ°è¿™ç‚¹ï¼Œé¦–å…ˆéœ€è¦å®šä¹‰å‡½æ•°ä½¿å…¶æ¥å—å˜å‚ï¼š

```go
func myfunc(arg ...int) {}
```

`arg ...int`å‘Šè¯‰Goè¿™ä¸ªå‡½æ•°æ¥å—ä¸å®šæ•°é‡çš„å‚æ•°ã€‚è¿™äº›å‚æ•°çš„ç±»å‹å…¨éƒ¨æ˜¯`int`ã€‚åœ¨å‡½æ•°ä½“ä¸­ï¼Œå˜é‡`arg`æ˜¯ä¸€ä¸ª`int`çš„`slice`ï¼š

```go
for _, n := range arg {
	fmt.Printf("And the number is: %d\n", n)
}
```

### ä¼ å€¼ä¸ä¼ æŒ‡é’ˆ

å½“æˆ‘ä»¬ä¼ ä¸€ä¸ªå‚æ•°å€¼åˆ°è¢«è°ƒç”¨å‡½æ•°é‡Œé¢æ—¶ï¼Œå®é™…ä¸Šæ˜¯ä¼ äº†è¿™ä¸ªå€¼çš„ä¸€ä»½copyï¼Œå½“åœ¨è¢«è°ƒç”¨å‡½æ•°ä¸­ä¿®æ”¹å‚æ•°å€¼çš„æ—¶å€™ï¼Œè°ƒç”¨å‡½æ•°ä¸­ç›¸åº”å®å‚ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œå› ä¸ºæ•°å€¼å˜åŒ–åªä½œç”¨åœ¨copyä¸Šã€‚

Goè¯­è¨€ä¸­`channel`ï¼Œ`slice`ï¼Œ`map`è¿™ä¸‰ç§ç±»å‹çš„å®ç°æœºåˆ¶ç±»ä¼¼æŒ‡é’ˆï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä¼ é€’ï¼Œè€Œä¸ç”¨å–åœ°å€åä¼ é€’æŒ‡é’ˆã€‚ï¼ˆæ³¨ï¼šè‹¥å‡½æ•°éœ€æ”¹å˜`slice`çš„é•¿åº¦ï¼Œåˆ™ä»éœ€è¦å–åœ°å€ä¼ é€’æŒ‡é’ˆï¼‰

### å‡½æ•°ä½œä¸ºå€¼ã€ç±»å‹

åœ¨Goä¸­å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`type`æ¥å®šä¹‰å®ƒï¼Œå®ƒçš„ç±»å‹å°±æ˜¯æ‰€æœ‰æ‹¥æœ‰ç›¸åŒçš„å‚æ•°ï¼Œç›¸åŒçš„è¿”å›å€¼çš„ä¸€ç§ç±»å‹

```go
type typeName func(input1 inputType1 , input2 inputType2 [, ...]) (result1 resultType1 [, ...])
```

å¯ä»¥æŠŠè¿™ä¸ªç±»å‹çš„å‡½æ•°å½“åšå€¼æ¥ä¼ é€’ã€‚

## defer

å½“å‡½æ•°æ‰§è¡Œåˆ°æœ€åæ—¶ï¼Œè¿™äº›deferè¯­å¥ä¼šæŒ‰ç…§é€†åºæ‰§è¡Œï¼Œæœ€åè¯¥å‡½æ•°è¿”å›ã€‚

## Panicå’ŒRecover

Goæ²¡æœ‰åƒJavaé‚£æ ·çš„å¼‚å¸¸æœºåˆ¶ï¼Œå®ƒä¸èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯ä½¿ç”¨äº†`panic`å’Œ`recover`æœºåˆ¶ã€‚

åº”å½“æŠŠå®ƒä½œä¸ºæœ€åçš„æ‰‹æ®µæ¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ çš„ä»£ç ä¸­åº”å½“æ²¡æœ‰ï¼Œæˆ–è€…å¾ˆå°‘æœ‰`panic`çš„ä¸œè¥¿ã€‚

- ### Panic

> æ˜¯ä¸€ä¸ªå†…å»ºå‡½æ•°ï¼Œå¯ä»¥ä¸­æ–­åŸæœ‰çš„æ§åˆ¶æµç¨‹ï¼Œè¿›å…¥ä¸€ä¸ª`panic`çŠ¶æ€ä¸­ã€‚å½“å‡½æ•°`F`è°ƒç”¨`panic`ï¼Œå‡½æ•°Fçš„æ‰§è¡Œè¢«ä¸­æ–­ï¼Œä½†æ˜¯`F`ä¸­çš„å»¶è¿Ÿå‡½æ•°ä¼šæ­£å¸¸æ‰§è¡Œï¼Œç„¶åFè¿”å›åˆ°è°ƒç”¨å®ƒçš„åœ°æ–¹ã€‚åœ¨è°ƒç”¨çš„åœ°æ–¹ï¼Œ`F`çš„è¡Œä¸ºå°±åƒè°ƒç”¨äº†`panic`ã€‚è¿™ä¸€è¿‡ç¨‹ç»§ç»­å‘ä¸Šï¼Œç›´åˆ°å‘ç”Ÿ`panic`çš„`goroutine`ä¸­æ‰€æœ‰è°ƒç”¨çš„å‡½æ•°è¿”å›ï¼Œæ­¤æ—¶ç¨‹åºé€€å‡ºã€‚`panic`å¯ä»¥ç›´æ¥è°ƒç”¨`panic`äº§ç”Ÿã€‚ä¹Ÿå¯ä»¥ç”±è¿è¡Œæ—¶é”™è¯¯äº§ç”Ÿï¼Œä¾‹å¦‚è®¿é—®è¶Šç•Œçš„æ•°ç»„ã€‚

- ### Recover

> æ˜¯ä¸€ä¸ªå†…å»ºçš„å‡½æ•°ï¼Œå¯ä»¥è®©è¿›å…¥`panic`çŠ¶æ€çš„`goroutine`æ¢å¤è¿‡æ¥ã€‚`recover`ä»…åœ¨å»¶è¿Ÿå‡½æ•°ä¸­æœ‰æ•ˆã€‚åœ¨æ­£å¸¸çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨`recover`ä¼šè¿”å›`nil`ï¼Œå¹¶ä¸”æ²¡æœ‰å…¶å®ƒä»»ä½•æ•ˆæœã€‚å¦‚æœå½“å‰çš„`goroutine`é™·å…¥`panic`çŠ¶æ€ï¼Œè°ƒç”¨`recover`å¯ä»¥æ•è·åˆ°`panic`çš„è¾“å…¥å€¼ï¼Œå¹¶ä¸”æ¢å¤æ­£å¸¸çš„æ‰§è¡Œã€‚

## `main`å‡½æ•°å’Œ`init`å‡½æ•°

Goé‡Œé¢æœ‰ä¸¤ä¸ªä¿ç•™çš„å‡½æ•°ï¼š`init`å‡½æ•°ï¼ˆèƒ½å¤Ÿåº”ç”¨äºæ‰€æœ‰çš„`package`ï¼‰å’Œ`main`å‡½æ•°ï¼ˆåªèƒ½åº”ç”¨äº`package main`ï¼‰ã€‚

è¿™ä¸¤ä¸ªå‡½æ•°åœ¨å®šä¹‰æ—¶ä¸èƒ½æœ‰ä»»ä½•çš„å‚æ•°å’Œè¿”å›å€¼ã€‚

è™½ç„¶ä¸€ä¸ª`package`é‡Œé¢å¯ä»¥å†™ä»»æ„å¤šä¸ª`init`å‡½æ•°ï¼Œä½†è¿™æ— è®ºæ˜¯å¯¹äºå¯è¯»æ€§è¿˜æ˜¯ä»¥åçš„å¯ç»´æŠ¤æ€§æ¥è¯´ï¼Œæˆ‘ä»¬éƒ½å¼ºçƒˆå»ºè®®ç”¨æˆ·åœ¨ä¸€ä¸ª`package`ä¸­æ¯ä¸ªæ–‡ä»¶åªå†™ä¸€ä¸ª`init`å‡½æ•°ã€‚

Goç¨‹åºä¼šè‡ªåŠ¨è°ƒç”¨`init()`å’Œ`main()`ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ã€‚

æ¯ä¸ª`package`ä¸­çš„`init`å‡½æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œä½†`package main`å°±å¿…é¡»åŒ…å«ä¸€ä¸ª`main`å‡½æ•°ã€‚

ç¨‹åºçš„åˆå§‹åŒ–å’Œæ‰§è¡Œéƒ½èµ·å§‹äº`main`åŒ…ã€‚å¦‚æœ`main`åŒ…è¿˜å¯¼å…¥äº†å…¶å®ƒçš„åŒ…ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ç¼–è¯‘æ—¶å°†å®ƒä»¬ä¾æ¬¡å¯¼å…¥ã€‚æœ‰æ—¶ä¸€ä¸ªåŒ…ä¼šè¢«å¤šä¸ªåŒ…åŒæ—¶å¯¼å…¥ï¼Œé‚£ä¹ˆå®ƒåªä¼šè¢«å¯¼å…¥ä¸€æ¬¡ã€‚

å½“ä¸€ä¸ªåŒ…è¢«å¯¼å…¥æ—¶ï¼Œå¦‚æœè¯¥åŒ…è¿˜å¯¼å…¥äº†å…¶å®ƒçš„åŒ…ï¼Œé‚£ä¹ˆä¼šå…ˆå°†å…¶å®ƒåŒ…å¯¼å…¥è¿›æ¥ï¼Œç„¶åå†å¯¹è¿™äº›åŒ…ä¸­çš„åŒ…çº§å¸¸é‡å’Œå˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œæ¥ç€æ‰§è¡Œ`init`å‡½æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œä¾æ¬¡ç±»æ¨ã€‚ç­‰æ‰€æœ‰è¢«å¯¼å…¥çš„åŒ…éƒ½åŠ è½½å®Œæ¯•äº†ï¼Œå°±ä¼šå¼€å§‹å¯¹`main`åŒ…ä¸­çš„åŒ…çº§å¸¸é‡å’Œå˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œç„¶åæ‰§è¡Œ`main`åŒ…ä¸­çš„`init`å‡½æ•°ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰ï¼Œæœ€åæ‰§è¡Œ`main`å‡½æ•°ã€‚ä¸‹å›¾è¯¦ç»†åœ°è§£é‡Šäº†æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼š

![img](https://github.com/astaxie/build-web-application-with-golang/raw/master/zh/images/2.3.init.png?raw=true)

åœ¨ `main.main` å‡½æ•°æ‰§è¡Œä¹‹å‰æ‰€æœ‰ä»£ç éƒ½è¿è¡Œåœ¨åŒä¸€ä¸ª goroutineï¼Œä¹Ÿå°±æ˜¯ç¨‹åºçš„ä¸»ç³»ç»Ÿçº¿ç¨‹ä¸­ã€‚å› æ­¤ï¼Œå¦‚æœæŸä¸ª `init` å‡½æ•°å†…éƒ¨ç”¨ go å…³é”®å­—å¯åŠ¨äº†æ–°çš„ goroutine çš„è¯ï¼Œæ–°çš„ goroutine åªæœ‰åœ¨è¿›å…¥ `main.main` å‡½æ•°ä¹‹åæ‰å¯èƒ½è¢«æ‰§è¡Œåˆ°ã€‚

## import

æˆ‘ä»¬åœ¨å†™Goä»£ç çš„æ—¶å€™ç»å¸¸ç”¨åˆ°importè¿™ä¸ªå‘½ä»¤ç”¨æ¥å¯¼å…¥åŒ…æ–‡ä»¶ï¼Œè€Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„æ–¹å¼å‚è€ƒå¦‚ä¸‹ï¼š

```go
import(
    "fmt"
)
```

ä¸Šé¢è¿™ä¸ªfmtæ˜¯Goè¯­è¨€çš„æ ‡å‡†åº“ï¼Œå…¶å®æ˜¯å»`GOROOT`ç¯å¢ƒå˜é‡æŒ‡å®šç›®å½•ä¸‹å»åŠ è½½è¯¥æ¨¡å—ã€‚

Goçš„importè¿˜æ”¯æŒå¦‚ä¸‹ä¸¤ç§æ–¹å¼æ¥åŠ è½½è‡ªå·±å†™çš„æ¨¡å—ï¼š

- ç›¸å¯¹è·¯å¾„
```go
import â€œ./modelâ€ //å½“å‰æ–‡ä»¶åŒä¸€ç›®å½•çš„modelç›®å½•ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™ç§æ–¹å¼æ¥import
```
- ç»å¯¹è·¯å¾„
```go
import â€œshorturl/modelâ€ //åŠ è½½gopath/src/shorturl/modelæ¨¡å—
```
ä¸Šé¢å±•ç¤ºäº†ä¸€äº›importå¸¸ç”¨çš„å‡ ç§æ–¹å¼ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„importï¼š

- ç‚¹æ“ä½œ

è¿™ä¸ªåŒ…å¯¼å…¥ä¹‹åï¼Œè°ƒç”¨è¿™ä¸ªåŒ…çš„å‡½æ•°æ—¶ï¼Œå¯ä»¥çœç•¥å‰ç¼€çš„åŒ…å

```
import(
    . "fmt"
)
```

- åˆ«åæ“ä½œ

æŠŠåŒ…å‘½åæˆå¦ä¸€ä¸ªåå­—

è°ƒç”¨åŒ…å‡½æ•°æ—¶å‰ç¼€å˜æˆè‡ªå®šä¹‰å‰ç¼€ï¼Œå³ `f.Println("hello world")`

```go
import(
    f "fmt"
)
```

- _ æ“ä½œ

_ æ“ä½œå¼•å…¥è¯¥åŒ…ï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨åŒ…é‡Œé¢çš„å‡½æ•°ï¼Œè€Œæ˜¯è°ƒç”¨äº†è¯¥åŒ…é‡Œé¢çš„initå‡½æ•°ã€‚

```go
import (
    "database/sql"
    _ "github.com/ziutek/mymysql/godrv"
)
```

## Struct

```go
type person struct {
	name string
	age int
}
```

### åŒ¿åå­—æ®µï¼ˆåµŒå…¥å­—æ®µï¼‰

Goæ”¯æŒåªæä¾›ç±»å‹ï¼Œè€Œä¸å†™å­—æ®µåçš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åŒ¿åå­—æ®µï¼Œä¹Ÿç§°ä¸ºåµŒå…¥å­—æ®µã€‚

å½“åŒ¿åå­—æ®µæ˜¯ä¸€ä¸ªstructçš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™ä¸ªstructæ‰€æ‹¥æœ‰çš„å…¨éƒ¨å­—æ®µéƒ½è¢«éšå¼åœ°å¼•å…¥äº†å½“å‰å®šä¹‰çš„è¿™ä¸ªstructã€‚

- åŒ¿åå­—æ®µèƒ½å¤Ÿå®ç°å­—æ®µçš„ç»§æ‰¿ã€‚

- æœ€å¤–å±‚çš„ä¼˜å…ˆè®¿é—®ã€‚

- è‡ªå®šä¹‰ç±»å‹ã€å†…ç½®ç±»å‹éƒ½å¯ä»¥ä½œä¸ºåŒ¿åå­—æ®µï¼Œè€Œä¸”å¯ä»¥åœ¨ç›¸åº”çš„å­—æ®µä¸Šé¢è¿›è¡Œå‡½æ•°æ“ä½œï¼ˆå¦‚appendï¼‰ã€‚

```go
package main

import "fmt"

type Human struct {
	name string
	age int
	weight int
}

type Student struct {
	Human  // åŒ¿åå­—æ®µï¼Œé‚£ä¹ˆé»˜è®¤Studentå°±åŒ…å«äº†Humançš„æ‰€æœ‰å­—æ®µ
	speciality string
}

func main() {
	// æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªå­¦ç”Ÿ
	mark := Student{Human{"Mark", 25, 120}, "Computer Science"}

	// æˆ‘ä»¬è®¿é—®ç›¸åº”çš„å­—æ®µ
	fmt.Println("His name is ", mark.name)
	fmt.Println("His age is ", mark.age)
	fmt.Println("His weight is ", mark.weight)
	fmt.Println("His speciality is ", mark.speciality)
	// ä¿®æ”¹å¯¹åº”çš„å¤‡æ³¨ä¿¡æ¯
	mark.speciality = "AI"
	fmt.Println("Mark changed his speciality")
	fmt.Println("His speciality is ", mark.speciality)
	// ä¿®æ”¹ä»–çš„å¹´é¾„ä¿¡æ¯
	fmt.Println("Mark become old")
	mark.age = 46
	fmt.Println("His age is", mark.age)
	// ä¿®æ”¹ä»–çš„ä½“é‡ä¿¡æ¯
	fmt.Println("Mark is not an athlet anymore")
	mark.weight += 60
	fmt.Println("His weight is", mark.weight)
}
```

Studentè®¿é—®å±æ€§ageå’Œnameçš„æ—¶å€™ï¼Œå°±åƒè®¿é—®è‡ªå·±æ‰€æœ‰ç”¨çš„å­—æ®µä¸€æ ·ã€‚

studentè¿˜èƒ½è®¿é—®Humanè¿™ä¸ªå­—æ®µä½œä¸ºå­—æ®µåï¼š

```go
mark.Human = Human{"Marcus", 55, 220}
mark.Human.age -= 1
```

æ‰€æœ‰çš„å†…ç½®ç±»å‹å’Œè‡ªå®šä¹‰ç±»å‹éƒ½æ˜¯å¯ä»¥ä½œä¸ºåŒ¿åå­—æ®µï¼Œè€Œä¸ä»…ä»…æ˜¯structå­—æ®µ

```go
package main

import "fmt"

type Skills []string

type Human struct {
	name string
	age int
	weight int
}

type Student struct {
	Human  // åŒ¿åå­—æ®µï¼Œstruct
	Skills // åŒ¿åå­—æ®µï¼Œè‡ªå®šä¹‰çš„ç±»å‹string slice
	int    // å†…ç½®ç±»å‹ä½œä¸ºåŒ¿åå­—æ®µ
	speciality string
}

func main() {
	// åˆå§‹åŒ–å­¦ç”ŸJane
	jane := Student{Human:Human{"Jane", 35, 100}, speciality:"Biology"}
	// ç°åœ¨æˆ‘ä»¬æ¥è®¿é—®ç›¸åº”çš„å­—æ®µ
	fmt.Println("Her name is ", jane.name)
	fmt.Println("Her age is ", jane.age)
	fmt.Println("Her weight is ", jane.weight)
	fmt.Println("Her speciality is ", jane.speciality)
	// æˆ‘ä»¬æ¥ä¿®æ”¹ä»–çš„skillæŠ€èƒ½å­—æ®µ
	jane.Skills = []string{"anatomy"}
	fmt.Println("Her skills are ", jane.Skills)
	fmt.Println("She acquired two new ones ")
	jane.Skills = append(jane.Skills, "physics", "golang")
	fmt.Println("Her skills now are ", jane.Skills)
	// ä¿®æ”¹åŒ¿åå†…ç½®ç±»å‹å­—æ®µ
	jane.int = 3
	fmt.Println("Her preferred number is", jane.int)
}
```

## method

methodçš„è¯­æ³•å¦‚ä¸‹ï¼š

```go
func (r ReceiverType) funcName(parameters) (results)
```

**Receiverä»¥å€¼ä¼ é€’ä¸ä¼šæ”¹å˜åŸå¯¹è±¡ï¼Œä»¥æŒ‡é’ˆä¼ é€’ä¼šæ”¹å˜åŸå¯¹è±¡ã€‚**

- è™½ç„¶methodçš„åå­—ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯å¦‚æœæ¥æ”¶è€…ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆmethodå°±ä¸ä¸€æ ·
- methodé‡Œé¢å¯ä»¥è®¿é—®æ¥æ”¶è€…çš„å­—æ®µ
- è°ƒç”¨methodé€šè¿‡`.`è®¿é—®ï¼Œå°±åƒstructé‡Œé¢è®¿é—®å­—æ®µä¸€æ ·

method å¯ä»¥å®šä¹‰åœ¨ä»»ä½•å†…ç½®ç±»å‹ã€structç­‰å„ç§ç±»å‹ä¸Šé¢ã€‚

method ä¹Ÿæ˜¯å¯ä»¥ç»§æ‰¿çš„ã€‚å¦‚æœåŒ¿åå­—æ®µå®ç°äº†ä¸€ä¸ªmethodï¼Œé‚£ä¹ˆåŒ…å«è¿™ä¸ªåŒ¿åå­—æ®µçš„structä¹Ÿèƒ½è°ƒç”¨è¯¥methodã€‚

method å¯ä»¥é‡å†™ï¼Œç±»ä¼¼äºåŒ¿åå­—æ®µã€‚

## Interface

interfaceç±»å‹å®šä¹‰äº†ä¸€ç»„æ–¹æ³•ï¼Œå¦‚æœæŸä¸ªå¯¹è±¡å®ç°äº†æŸä¸ªæ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œåˆ™æ­¤å¯¹è±¡å°±å®ç°äº†æ­¤æ¥å£ã€‚

interfaceå°±æ˜¯ä¸€ç»„æŠ½è±¡æ–¹æ³•çš„é›†åˆï¼Œå®ƒå¿…é¡»ç”±å…¶ä»–éinterfaceç±»å‹å®ç°ï¼Œè€Œä¸èƒ½è‡ªæˆ‘å®ç°ã€‚

```go
type Men interface {
	SayHi()
	Sing(lyrics string)
	Guzzle(beerStein string)
}
```

å¦‚æœæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªinterfaceçš„å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡é‡Œé¢å¯ä»¥å­˜å®ç°è¿™ä¸ªinterfaceçš„ä»»æ„ç±»å‹çš„å¯¹è±¡ã€‚å› ä¸ºmèƒ½å¤ŸæŒæœ‰è¿™ä¸‰ç§ç±»å‹çš„å¯¹è±¡ã€‚

### ç©º interface

ä»»æ„çš„ç±»å‹éƒ½å®ç°äº†ç©ºinterface(å³ interface{})ï¼Œä¹Ÿå°±æ˜¯åŒ…å«0ä¸ªmethodçš„interfaceã€‚

ç©ºinterfaceå¯¹äºæè¿°èµ·ä¸åˆ°ä»»ä½•çš„ä½œç”¨(å› ä¸ºå®ƒä¸åŒ…å«ä»»ä½•çš„methodï¼‰ï¼Œä½†æ˜¯ç©ºinterfaceåœ¨æˆ‘ä»¬éœ€è¦å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°å€¼çš„æ—¶å€™ç›¸å½“æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°å€¼ã€‚å®ƒæœ‰ç‚¹ç±»ä¼¼äºCè¯­è¨€çš„void*ç±»å‹ã€‚

ä¸€ä¸ªå‡½æ•°æŠŠinterface{}ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„å€¼ä½œä¸ºå‚æ•°ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›interface{},é‚£ä¹ˆä¹Ÿå°±å¯ä»¥è¿”å›ä»»æ„ç±»å‹çš„å€¼ã€‚

### interface å‡½æ•°å‚æ•°

interfaceçš„å˜é‡å¯ä»¥æŒæœ‰ä»»æ„å®ç°è¯¥interfaceç±»å‹çš„å¯¹è±¡ï¼Œè¿™ç»™æˆ‘ä»¬ç¼–å†™å‡½æ•°(åŒ…æ‹¬method)æä¾›äº†ä¸€äº›é¢å¤–çš„æ€è€ƒï¼šå¯ä»¥é€šè¿‡å®šä¹‰interfaceå‚æ•°ï¼Œè®©å‡½æ•°æ¥å—å„ç§ç±»å‹çš„å‚æ•°ã€‚

ä¸¾ä¸ªğŸŒ°ï¼šfmt.Printlnæ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ä½ æ˜¯å¦æ³¨æ„åˆ°å®ƒå¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„æ•°æ®ã€‚æ‰“å¼€fmtçš„æºç æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€ä¸ªå®šä¹‰:

```go
type Stringer interface {
	 String() string
}
// Stringer æ¥å£åªæœ‰ä¸€ä¸ª String æ–¹æ³•ï¼Œå› æ­¤åªè¦å®ç° String æ–¹æ³•å³å¯å®ç° Stringer æ¥å£ã€‚
```

ä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä½•å®ç°äº†Stringæ–¹æ³•çš„ç±»å‹éƒ½èƒ½ä½œä¸ºå‚æ•°è¢«fmt.Printlnè°ƒç”¨ã€‚

æ³¨ï¼šå®ç°äº†erroræ¥å£çš„å¯¹è±¡ï¼ˆå³å®ç°äº†Error() stringçš„å¯¹è±¡ï¼‰ï¼Œä½¿ç”¨fmtè¾“å‡ºæ—¶ï¼Œä¼šè°ƒç”¨Error()æ–¹æ³•ï¼Œå› æ­¤ä¸å¿…å†å®šä¹‰String()æ–¹æ³•äº†ã€‚

### interfaceå˜é‡å­˜å‚¨çš„ç±»å‹

æˆ‘ä»¬çŸ¥é“interfaceçš„å˜é‡é‡Œé¢å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°å€¼(è¯¥ç±»å‹å®ç°äº†interface)ã€‚é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆåå‘çŸ¥é“è¿™ä¸ªå˜é‡é‡Œé¢å®é™…ä¿å­˜äº†çš„æ˜¯å“ªä¸ªç±»å‹çš„å¯¹è±¡å‘¢ï¼Ÿç›®å‰å¸¸ç”¨çš„æœ‰ä¸¤ç§æ–¹æ³•ï¼š

- Comma-okæ–­è¨€ï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­æ˜¯å¦æ˜¯è¯¥ç±»å‹çš„å˜é‡ã€‚

```go
 value, ok = element.(T)
```

è¿™é‡Œvalueå°±æ˜¯å˜é‡çš„å€¼ï¼Œokæ˜¯ä¸€ä¸ªboolç±»å‹ï¼Œelementæ˜¯interfaceå˜é‡ï¼ŒTæ˜¯æ–­è¨€çš„ç±»å‹ã€‚

å¦‚æœelementé‡Œé¢ç¡®å®å­˜å‚¨äº†Tç±»å‹çš„æ•°å€¼ï¼Œé‚£ä¹ˆokè¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚

- switchæµ‹è¯•

`element.(type)`è¯­æ³•ä¸èƒ½åœ¨switchå¤–çš„ä»»ä½•é€»è¾‘é‡Œé¢ä½¿ç”¨ï¼Œå¦‚æœè¦åœ¨switchå¤–é¢åˆ¤æ–­ä¸€ä¸ªç±»å‹å°±ä½¿ç”¨`comma-ok`ã€‚

### åµŒå…¥interface

åŠŸèƒ½ç±»ä¼¼äº Struct çš„åŒ¿åå­—æ®µï¼šå¦‚æœä¸€ä¸ªinterface1ä½œä¸ºinterface2çš„ä¸€ä¸ªåµŒå…¥å­—æ®µï¼Œé‚£ä¹ˆinterface2éšå¼çš„åŒ…å«äº†interface1é‡Œé¢çš„methodã€‚

ä¸¾ä¸ªğŸŒ°

```go
// åœ¨æºç åŒ… container/heap çš„ä¸€ä¸ªå®šä¹‰
type Interface interface {
	sort.Interface  // åµŒå…¥å­—æ®µsort.Interface
	Push(x interface{})  // a Push method to push elements into the heap
	Pop() interface{}  // a Pop elements that pops elements from the heap
}
```

sort.Interfaceå…¶å®å°±æ˜¯åµŒå…¥å­—æ®µï¼ŒæŠŠsort.Interfaceçš„æ‰€æœ‰methodç»™éšå¼çš„åŒ…å«è¿›æ¥äº†ã€‚ä¹Ÿå°±æ˜¯ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•ï¼š

```go
type Interface interface {
	// Len is the number of elements in the collection.
	Len() int
	// Less returns whether the element with index i should sort
	// before the element with index j.
	Less(i, j int) bool
	// Swap swaps the elements with indexes i and j.
	Swap(i, j int)
}
```

å†ä¸¾ä¸€ä¸ªğŸŒ°

ioåŒ…ä¸‹é¢çš„ io.ReadWriter ï¼Œå®ƒåŒ…å«äº†ioåŒ…ä¸‹é¢çš„Readerå’ŒWriterä¸¤ä¸ªinterfaceï¼š

```go
// io.ReadWriter
type ReadWriter interface {
	Reader
	Writer
}
```

## åå°„

åå°„æœºåˆ¶ä¸ä»…åŒ…æ‹¬è¦èƒ½åœ¨è¿è¡Œæ—¶å¯¹ç¨‹åºè‡ªèº«ä¿¡æ¯è¿›è¡Œæ£€æµ‹ï¼Œè¿˜è¦æ±‚ç¨‹åºèƒ½è¿›ä¸€æ­¥æ ¹æ®è¿™äº›ä¿¡æ¯æ”¹å˜ç¨‹åºçŠ¶æ€æˆ–ç»“æ„ã€‚æˆ‘ä»¬ä¸€èˆ¬ç”¨åˆ°çš„åŒ…æ˜¯reflectåŒ…ã€‚å‚è€ƒ [laws of reflection](http://golang.org/doc/articles/laws_of_reflection.html)

> **å…ƒç¼–ç¨‹**ï¼ˆè‹±è¯­ï¼šMetaprogrammingï¼‰ï¼Œåˆè¯‘**è¶…ç¼–ç¨‹**ï¼Œæ˜¯æŒ‡æŸç±»[è®¡ç®—æœºç¨‹åº](https://zh.wikipedia.org/wiki/è®¡ç®—æœºç¨‹åº)çš„ç¼–å†™ï¼Œè¿™ç±»è®¡ç®—æœºç¨‹åºç¼–å†™æˆ–è€…æ“çºµå…¶å®ƒç¨‹åºï¼ˆæˆ–è€…è‡ªèº«ï¼‰ä½œä¸ºå®ƒä»¬çš„æ•°æ®ï¼Œæˆ–è€…åœ¨[è¿è¡Œæ—¶](https://zh.wikipedia.org/wiki/è¿è¡Œæ—¶)å®Œæˆéƒ¨åˆ†æœ¬åº”åœ¨[ç¼–è¯‘æ—¶](https://zh.wikipedia.org/wiki/ç¼–è¯‘æ—¶)å®Œæˆçš„å·¥ä½œã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸æ‰‹å·¥ç¼–å†™å…¨éƒ¨ä»£ç ç›¸æ¯”ï¼Œç¨‹åºå‘˜å¯ä»¥è·å¾—æ›´é«˜çš„å·¥ä½œæ•ˆç‡ï¼Œæˆ–è€…ç»™ä¸ç¨‹åºæ›´å¤§çš„çµæ´»åº¦å»å¤„ç†æ–°çš„æƒ…å½¢è€Œæ— éœ€é‡æ–°ç¼–è¯‘ã€‚
>
> ç¼–å†™å…ƒç¨‹åºçš„è¯­è¨€ç§°ä¹‹ä¸º[å…ƒè¯­è¨€](https://zh.wikipedia.org/wiki/å…ƒèªè¨€)ã€‚è¢«æ“çºµçš„ç¨‹åºçš„è¯­è¨€ç§°ä¹‹ä¸ºâ€œ[ç›®æ ‡è¯­è¨€](https://zh.wikipedia.org/w/index.php?title=ç›®æ ‡è¯­è¨€&action=edit&redlink=1)â€ã€‚ä¸€é—¨ç¼–ç¨‹è¯­è¨€åŒæ—¶ä¹Ÿæ˜¯è‡ªèº«çš„å…ƒè¯­è¨€çš„èƒ½åŠ›ç§°ä¹‹ä¸ºâ€œ[åå°„](https://zh.wikipedia.org/wiki/åå°„_(è®¡ç®—æœºç§‘å­¦))â€æˆ–è€…â€œè‡ªåâ€ã€‚
>
> åå°„æ˜¯ä¿ƒè¿›å…ƒç¼–ç¨‹çš„ä¸€ç§å¾ˆæœ‰ä»·å€¼çš„è¯­è¨€ç‰¹æ€§ã€‚æŠŠç¼–ç¨‹è¯­è¨€è‡ªèº«ä½œä¸ºä¸€çº§æ•°æ®ç±»å‹ï¼ˆå¦‚[LISP](https://zh.wikipedia.org/wiki/LISP)ã€[Forth](https://zh.wikipedia.org/wiki/Forth)æˆ–[Rebol](https://zh.wikipedia.org/wiki/Rebol)ï¼‰ä¹Ÿå¾ˆæœ‰ç”¨ã€‚æ”¯æŒ[æ³›å‹ç¼–ç¨‹](https://zh.wikipedia.org/wiki/æ³›å‹ç¼–ç¨‹)çš„è¯­è¨€ä¹Ÿä½¿ç”¨å…ƒç¼–ç¨‹èƒ½åŠ›ã€‚

ä½¿ç”¨reflectä¸€èˆ¬åˆ†æˆä¸‰æ­¥:

è¦å»åå°„æŸä¸ªç±»å‹çš„å€¼(è¿™äº›å€¼éƒ½å®ç°äº†ç©ºinterface)ï¼Œé¦–å…ˆéœ€è¦æŠŠå®ƒè½¬åŒ–æˆreflectå¯¹è±¡(reflect.Typeæˆ–è€…reflect.Valueï¼Œæ ¹æ®ä¸åŒçš„æƒ…å†µè°ƒç”¨ä¸åŒçš„å‡½æ•°)ã€‚è¿™ä¸¤ç§è·å–æ–¹å¼å¦‚ä¸‹:

```go
t := reflect.TypeOf(i)    //å¾—åˆ°ç±»å‹çš„å…ƒæ•°æ®,é€šè¿‡tæˆ‘ä»¬èƒ½è·å–ç±»å‹å®šä¹‰é‡Œé¢çš„æ‰€æœ‰å…ƒç´ 
v := reflect.ValueOf(i)   //å¾—åˆ°å®é™…çš„å€¼ï¼Œé€šè¿‡væˆ‘ä»¬è·å–å­˜å‚¨åœ¨é‡Œé¢çš„å€¼ï¼Œè¿˜å¯ä»¥å»æ”¹å˜å€¼
```

è½¬åŒ–ä¸ºreflectå¯¹è±¡ä¹‹åæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸€äº›æ“ä½œäº†ï¼Œä¹Ÿå°±æ˜¯å°†reflectå¯¹è±¡è½¬åŒ–æˆç›¸åº”çš„å€¼ï¼Œä¾‹å¦‚:

```go
tag := t.Elem().Field(0).Tag  //è·å–å®šä¹‰åœ¨structé‡Œé¢çš„æ ‡ç­¾
name := v.Elem().Field(0).String()  //è·å–å­˜å‚¨åœ¨ç¬¬ä¸€ä¸ªå­—æ®µé‡Œé¢çš„å€¼
```

è·å–åå°„å€¼èƒ½è¿”å›ç›¸åº”çš„ç±»å‹å’Œæ•°å€¼

```go
var x float64 = 3.4
v := reflect.ValueOf(x)
fmt.Println("type:", v.Type())
fmt.Println("kind is float64:", v.Kind() == reflect.Float64)
fmt.Println("value:", v.Float())
```

æœ€åï¼Œ**åå°„çš„å­—æ®µå¿…é¡»æ˜¯å¯ä¿®æ”¹çš„**ã€‚åå°„çš„å­—æ®µå¿…é¡»æ˜¯å¯è¯»å†™çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸‹é¢è¿™æ ·å†™ï¼Œé‚£ä¹ˆä¼šå‘ç”Ÿé”™è¯¯

```go
var x float64 = 3.4
v := reflect.ValueOf(x)
v.SetFloat(7.1)
```

å¦‚æœè¦ä¿®æ”¹ç›¸åº”çš„å€¼ï¼Œå¿…é¡»è¿™æ ·å†™

```go
var x float64 = 3.4
p := reflect.ValueOf(&x)
v := p.Elem()
v.SetFloat(7.1)
```

